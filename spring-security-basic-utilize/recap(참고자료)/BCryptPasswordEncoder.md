## BCryptPasswordEncoderλ€?

BCryptPasswordEncoderλ” Spring Securityμ—μ„ μ κ³µν•λ” **λΉ„λ°€λ²νΈ ν•΄μ‹ μ•”νΈν™”** λ„κµ¬λ΅, μ‚¬μ©μμ λΉ„λ°€λ²νΈλ¥Ό **λ‹¨λ°©ν–¥ ν•΄μ‹ μ²λ¦¬**ν•κΈ° μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

BCryptλ” λ‹¨λ°©ν–¥ ν•΄μ‹ μ•κ³ λ¦¬μ¦ μ¤‘ ν•λ‚λ΅, κ°™μ€ μ…λ ¥κ°’μ΄λΌλ„ λ§¤λ² **λ‹¤λ¥Έ κ²°κ³Όκ°’(ν•΄μ‹)** λ¥Ό μƒμ„±ν•κ³ , μ•”νΈν™”λ κ°’μ„ μ—­μΌλ΅ λ³µνΈν™”ν•  μ μ—†μµλ‹λ‹¤.

---

## π“ ν•µμ‹¬ νΉμ§• μ”μ•½

| ν•­λ© | μ„¤λ… |
| --- | --- |
| π” λ‹¨λ°©ν–¥μ„± | μ•”νΈν™”λ κ°’μ€ λ³µνΈν™” λ¶κ°€. λΉ„κµλ” matches() λ©”μ„λ“λ΅λ§ κ°€λ¥ |
| π”‘ λ‚΄λ¶€ μ†”νΈ(salt) ν¬ν•¨ | μλ™μΌλ΅ saltλ¥Ό ν¬ν•¨ν•μ—¬ μ €μ¥. λ™μΌν• λΉ„λ°€λ²νΈλΌλ„ κ²°κ³Όκ°’μ΄ λ‹¤λ¦„ |
| β³ λλ¦° ν•΄μ‹(λΉ„μ© factor) | κ³µκ²©μκ°€ λΉ λ¥΄κ² λ€μ…ν•μ§€ λ»ν•λ„λ΅ μ—°μ‚° λΉ„μ©μ„ μ΅°μ  κ°€λ¥ (strength) |
| π”’ μ•μ „μ„± | Rainbow Table κ³µκ²© λ° Brute Force κ³µκ²©μ— κ°•ν•¨ |
| π§© μ¤ν”„λ§ ν†µν•© | PasswordEncoder μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„, Spring Securityμ—μ„ λ°”λ΅ μ‚¬μ© κ°€λ¥ |

---

## π§ λ‚΄λ¶€ λ™μ‘ λ°©μ‹

```
BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();

// μ•”νΈν™”
String hashed = encoder.encode("myPassword");

// λΉ„κµ
boolean match = encoder.matches("myPassword", hashed);
```

-   **encode(plainText)**  
    β†’ λ‚΄λ¶€μ μΌλ΅ saltλ¥Ό μƒμ„±ν•κ³ , λ³µμ΅ν• κ³„μ‚°μ„ ν†µν•΄ ν•΄μ‹κ°’ μƒμ„±  
    β†’ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™μ€ λ¬Έμμ—΄ ν•νƒ:

```
$2a$10$xjqZj4hk6/NOJxEOI7Ilt.bD2vQoXEdOBodWmVRRIP9z6KPzBi3yq
```

-   **matches(rawPassword, encodedPassword)**  
    β†’ κΈ°μ΅΄μ— μ•”νΈν™”λ λ¬Έμμ—΄μ—μ„ salt κ°’μ„ μ¶”μ¶ν•μ—¬ λ™μΌν• λ°©μ‹μΌλ΅ λ‹¤μ‹ ν•΄μ‹ν•κ³ , λΉ„κµ

---

## π” κµ¬μ„± μ”μ† μ„¤λ…

```
$2a$10$xjqZj4hk6/NOJxEOI7Ilt.bD2vQoXEdOBodWmVRRIP9z6KPzBi3yq
|  |  |  |
|  |  |  β””β”€β”€ ν•΄μ‹ κ²°κ³Ό
|  |  β””β”€β”€β”€β”€β”€β”€ μ†”νΈ κ°’ (22μ)
|  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€ μ‘μ—… μΈμ(cost factor, 10)
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ μ•κ³ λ¦¬μ¦ (2a: BCrypt)
```

-   **2a** : μ•κ³ λ¦¬μ¦ λ²„μ „
-   **10** : λΉ„μ© factor (λ†’μ„μλ΅ μ—°μ‚°λ‰ μ¦κ°€ β†’ λ³΄μ•β†‘, μ„±λ¥β†“)
-   **22μλ¦¬ salt** : λ§¤λ² μƒλ΅ μƒμ„±λ¨
-   **31μλ¦¬ ν•΄μ‹κ°’** : μ‹¤μ  μ•”νΈν™”λ κ²°κ³Ό

---

## β™οΈ μƒμ„±μ μµμ…

```
// κΈ°λ³Έ μƒμ„±μ: cost = 10
BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();

// μ»¤μ¤ν…€ cost μ„¤μ • (4~31 λ²”μ„ μ¶”μ²)
BCryptPasswordEncoder encoder = new BCryptPasswordEncoder(12);
```

-   **λΉ„μ© μΈμ(strength)**: κΈ°λ³Έκ°’μ€ 10 β†’ μ«μκ°€ λ†’μ„μλ΅ λ³΄μ•μ€ λ†’μ•„μ§€μ§€λ§ μ„±λ¥μ€ λλ ¤μ§
-   μ‹¤λ¬΄μ—μ„λ” **10 ~ 12** μ •λ„κ°€ μΌλ°μ 

---

## π’΅ μ‹¤λ¬΄ μ μ© μμ‹

### 1\. νμ›κ°€μ… μ‹ μ•”νΈν™”

```
user.setPassword(encoder.encode(signUpDto.getPassword()));
```

### 2\. λ΅κ·ΈμΈ μ‹ λΉ„κµ

Spring Security λ‚΄λ¶€μ—μ„ μλ™μΌλ΅ μ²λ¦¬λ¨  
β†’ UserDetailsServiceμ—μ„ DBμ—μ„ λΉ„λ°€λ²νΈλ¥Ό κ°€μ Έμ¤κΈ°λ§ ν•λ©΄ λ¨

---

## π›΅οΈ λ³΄μ•μ  μ¥μ 

| κ³µκ²© μ ν• | λ€μ‘ λ°©μ‹ |
| --- | --- |
| π“ƒ Rainbow Table | saltλ΅ μΈν•΄ λ™μΌν• μ…λ ¥κ°’λ„ κ²°κ³Όκ°€ λ‹¤λ¥΄λ―€λ΅ λ¬΄ν¨ν™” |
| π§  Brute-force | λΉ„μ© μΈμκ°€ λ†’μ„μλ΅ μ‹κ°„ μ¤λ κ±Έλ¦Ό |
| π”„ λ™μΌ ν•΄μ‹κ°’ λ°λ³µ | saltκ°€ ν¬ν•¨λμ–΄ μμΌλ―€λ΅ κ°™μ€ λΉ„λ°€λ²νΈλΌλ„ κ²°κ³Όκ°’μ΄ λ§¤λ² λ‹¤λ¦„ |
| π“‚ DB μ μ¶ μ‹ | ν•΄μ‹κ°’λ§ μ €μ¥λλ―€λ΅ μ›λ¬Έ μ μ¶” μ–΄λ ¤μ›€ |

---

## π” μ”μ•½ μ •λ¦¬



| ν•­λ© | λ‚΄μ© |
| --- | --- |
| ν΄λμ¤λ… | org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder |
| λ©μ  | μ‚¬μ©μ λΉ„λ°€λ²νΈ λ‹¨λ°©ν–¥ ν•΄μ‹ μ•”νΈν™” |
| λ‚΄λ¶€ νΉμ§• | μ†”νΈ μλ™ ν¬ν•¨, λΉ„μ© μΈμ μ΅°μ  κ°€λ¥ |
| μ¥μ  | λ†’μ€ λ³΄μ•μ„±, Springκ³Όμ ν†µν•©μ„± |
| λ©”μ„λ“ | encode(), matches() |
| μ¶”μ² λΉ„μ© μΈμ | 10 ~ 12 (κΈ°λ³Έ: 10) |